{% extends "base.html" %} {% block content %}
<div class="max-w-4xl mx-auto bg-white p-8 rounded-lg shadow-lg">
  <h1 class="text-2xl font-bold mb-6">Feed</h1>
  <a
    href="{% url 'create_post' %}"
    class="bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700 mb-6 inline-block"
  >
    Create New Post
  </a>
  {% for post in posts %}
  <div class="mb-6 p-4 border border-gray-300 rounded-lg">
    <p class="text-gray-600">
      {{ post.author.username }} - {{ post.created_at }}
    </p>
    <p class="mt-2">{{ post.content }}</p>
    {% if post.image %}
    <img src="{{ post.image.url }}" alt="Post Image" class="mt-4" />
    {% endif %} {% if post.file %}
    <a href="{{ post.file.url }}" class="mt-4 text-indigo-600 hover:underline"
      >Download File</a
    >
    {% endif %}

    <!-- Comments Section -->
    <div class="mt-4">
      <h3 class="text-lg font-semibold">Comments</h3>
      {% for comment in post.comments.all %}
      <div class="ml-4 mt-2 p-2 border-l-2 border-gray-300">
        <p class="text-gray-600">
          {{ comment.author.username }} - {{ comment.created_at }}
        </p>
        <p>{{ comment.content }}</p>
      </div>
      {% endfor %}
      <form method="post" action="{% url 'add_comment' post.id %}">
        {% csrf_token %} {{ comment_form.as_p }}
        <button
          type="submit"
          class="bg-indigo-600 text-white py-1 px-2 rounded-md hover:bg-indigo-700"
        >
          Add Comment
        </button>
      </form>
    </div>
  </div>
  {% endfor %}
</div>
{% endblock %}
