{% extends "base.html" %}
{% load static %}
<div
  class="fixed inset-0 z-50 overflow-y-auto"
  aria-labelledby="modal-title"
  role="dialog"
  aria-modal="true"
>
  <div
    class="flex items-end justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0"
  >
    <div
      class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"
      aria-hidden="true"
    ></div>
    <span
      class="hidden sm:inline-block sm:align-middle sm:h-screen"
      aria-hidden="true"
      >â€‹</span
    >
    <div
      class="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-md sm:w-full"
    >
      <div class="px-4 py-3 sm:px-6">
        <h3
          class="text-lg font-medium leading-6 text-gray-900"
          id="modal-title"
        >
          New thread
        </h3>
      </div>
      <div class="px-4 py-5 sm:p-6">
        <div class="flex gap-4">
          <div>
            <div class="w-10 h-10 rounded-full overflow-hidden">
              <img
                src="{% static 'placeholder.svg' %}"
                alt="Avatar"
                class="object-cover w-full h-full"
              />
            </div>
          </div>
          <div class="flex-1">
            <div class="font-semibold">
              {% if user.is_authenticated %} {{ user.username }} {% else %}
              Guest {% endif %}
            </div>
            <textarea
              class="w-full mt-2 resize-none border-0 bg-transparent text-lg placeholder-gray-500 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50"
              placeholder="What's new?"
              rows="4"
              id="new-post-content"
            ></textarea>
            <div class="flex items-center gap-2 mt-4">
              <button
                type="button"
                class="p-2 bg-transparent rounded-md hover:bg-gray-100 focus:outline-none focus:bg-gray-100"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke-width="1.5"
                  stroke="currentColor"
                  class="w-4 h-4"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.9-2.9m-7.5-7.5l4.5 4.5"
                  />
                </svg>
              </button>
              <button
                type="button"
                class="p-2 bg-transparent rounded-md hover:bg-gray-100 focus:outline-none focus:bg-gray-100"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke-width="1.5"
                  stroke="currentColor"
                  class="w-4 h-4"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M16.5 6v.75m0 3v.75m0 3v.75m-8.625 3.648a3.375 3.375 0 01-4.875-4.875 3.375 3.375 0 014.875-4.875 3.375 3.375 0 014.875 4.875V18"
                  />
                </svg>
              </button>
              <button
                type="button"
                class="p-2 bg-transparent rounded-md hover:bg-gray-100 focus:outline-none focus:bg-gray-100"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke-width="1.5"
                  stroke="currentColor"
                  class="w-4 h-4"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M15 10.5a3 3 0 11-6 0 3 3 0 016 0z"
                  />
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z"
                  />
                </svg>
              </button>
              <button
                type="button"
                class="p-2 bg-transparent rounded-md hover:bg-gray-100 focus:outline-none focus:bg-gray-100"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke-width="1.5"
                  stroke="currentColor"
                  class="w-4 h-4"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M15.182 15.182a4.5 4.5 0 00-6.364-6.364 4.5 4.5 0 006.364 6.364zM21 12a9 9 0 11-18 0 9 9 0 0118 0z"
                  />
                </svg>
              </button>
            </div>
          </div>
        </div>
        <div class="mt-4 flex items-center justify-between">
          <span class="text-sm text-gray-500"> Anyone can reply & quote </span>
          <button
            type="button"
            class="bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700 focus:outline-none"
            disabled
          >
            Post
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const textarea = document.getElementById("new-post-content");
    const postButton = document
      .querySelector("#modal-title")
      .closest(".inline-block")
      .querySelector('button[type="button"]');

    textarea.addEventListener("input", function () {
      postButton.disabled = textarea.value.trim() === "";
    });
  });
</script>
